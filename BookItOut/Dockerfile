FROM adoptopenjdk/openjdk11

MAINTAINER JINKYUM PARK
ARG JAR_FILE_PATH=./build/libs/*.jar
WORKDIR ./

# PROFILE
ENV SPRING_ACTIVE_PROFILE=prod
# SECURITY
ENV JWT_SECRET_KEY=${JWT_SECRET_KEY}
# DB
ENV BOOK_IT_OUT_DB_URL=${DB_URL}
ENV BOOK_IT_OUT_DB_USERNAME=${DB_ID}
ENV BOOK_IT_OUT_DB_PASSWORD=${DB_PW}
#EMAIL
ENV BOOK_IT_OUT_EMAIL_HOST=smtp.gmail.com
ENV BOOK_IT_OUT_EMAIL_PORT=587
ENV BOOK_IT_OUT_EMAIL_USERNAME=${EMAIL_ID}
ENV BOOK_IT_OUT_EMAIL_PASSWORD=${EMAIL_PWEMAIL}

EXPOSE 80

CMD ["./mvnw", "clean", "build"]
COPY ${JAR_FILE_PATH} ./bookitout.jar/
ENTRYPOINT ["java", "-jar", "bookitout.jar"]